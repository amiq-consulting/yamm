<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>YAMM: yamm_buffer.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>yamm_buffer.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/******************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> * (C) Copyright 2016 AMIQ Consulting</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<a name="l00005"></a>00005 <span class="comment"> * you may not use this file except in compliance with the License.</span>
<a name="l00006"></a>00006 <span class="comment"> * You may obtain a copy of the License at</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> * Unless required by applicable law or agreed to in writing, software</span>
<a name="l00011"></a>00011 <span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<a name="l00012"></a>00012 <span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00013"></a>00013 <span class="comment"> * See the License for the specific language governing permissions and</span>
<a name="l00014"></a>00014 <span class="comment"> * limitations under the License.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> *******************************************************************************/</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="preprocessor">#ifndef __yamm_buffer_h</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor">#define __yamm_buffer_h</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;yamm_access.h&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="keyword">namespace </span>yamm_ns {
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="preprocessor">#ifndef uint_32_t</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uint_32_t;
<a name="l00028"></a>00028 <span class="preprocessor">#endif</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span>
<a name="l00033"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html">00033</a> <span class="keyword">class </span><a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a> {
<a name="l00034"></a>00034 <span class="keyword">private</span>:
<a name="l00035"></a>00035         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classyamm__ns_1_1yamm.html" title="Top level class.">yamm</a>;
<a name="l00036"></a>00036 <span class="keyword">protected</span>:
<a name="l00037"></a>00037 
<a name="l00038"></a>00038         <span class="comment">// Top buffer pointers (container level)</span>
<a name="l00039"></a>00039 
<a name="l00041"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#af9516a294be399bd32f19e9926dc44fe">00041</a>         <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* <a class="code" href="classyamm__ns_1_1yamm__buffer.html#af9516a294be399bd32f19e9926dc44fe" title="first free buffer contained">first_free</a>;
<a name="l00043"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#a653eb6a13e2a9be042cc8a98eaf604ea">00043</a>         <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a653eb6a13e2a9be042cc8a98eaf604ea" title="first buffer contained (free or occupied)">first</a>;
<a name="l00044"></a>00044 
<a name="l00045"></a>00045         <span class="comment">// Links in the list (current level)</span>
<a name="l00046"></a>00046 
<a name="l00048"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#a1f55e15b01d0a276aa7a99e61b828bd4">00048</a>         <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a1f55e15b01d0a276aa7a99e61b828bd4" title="next free buffer on current recursion level">next_free</a>;
<a name="l00050"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#a2e00e78093c8dd087cf6cdd93a7cc2a4">00050</a>         <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a2e00e78093c8dd087cf6cdd93a7cc2a4" title="previous free buffer on current recursion level">prev_free</a>;
<a name="l00052"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#a6768b4e2d199bec0e59cfc020a2167fd">00052</a>         <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a6768b4e2d199bec0e59cfc020a2167fd" title="next buffer on current recursion level (free or occupied)">next</a>;
<a name="l00054"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#a7977210ee30097d3df4f5a0927d0f645">00054</a>         <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a7977210ee30097d3df4f5a0927d0f645" title="previous free buffer on current recursion level (free or occupied)">prev</a>;
<a name="l00055"></a>00055 
<a name="l00057"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#afc3034dc77bf7f0f2af796960bc0fe2f">00057</a>         <span class="keywordtype">char</span>* <a class="code" href="classyamm__ns_1_1yamm__buffer.html#afc3034dc77bf7f0f2af796960bc0fe2f" title="buffer&amp;#39;s payload">contents</a>;
<a name="l00059"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#a6f1cd50ac2fbad858d15145cd423fbf5">00059</a>         uint <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a6f1cd50ac2fbad858d15145cd423fbf5" title="number of occupied buffers">number_of_buffers</a>;
<a name="l00061"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#a1c291db4067e8317c6627d0553e40068">00061</a>         uint <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a1c291db4067e8317c6627d0553e40068" title="number of free buffers">number_of_free_buffers</a>;
<a name="l00062"></a>00062 
<a name="l00064"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#aede545ee609ae750355a72162531bba3">00064</a>         uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#aede545ee609ae750355a72162531bba3" title="Start address of the buffer.">start_addr</a>;
<a name="l00066"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#aad6087f89430ad272f6e22d412819498">00066</a>         uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#aad6087f89430ad272f6e22d412819498" title="End address of the buffer.">end_addr</a>;
<a name="l00068"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#a37d7c266567a1f0fc54dcdee095bd747">00068</a>         uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a37d7c266567a1f0fc54dcdee095bd747" title="Size of the buffer.">size</a>;
<a name="l00069"></a>00069 
<a name="l00071"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#a5fef85230ba3cc2d574a3529cd6f8f0b">00071</a>         uint_32_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a5fef85230ba3cc2d574a3529cd6f8f0b" title="Granularity of the buffer.">granularity</a>;
<a name="l00073"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#af8c9f6ef56de148e3b755f64eb7fdb74">00073</a>         uint_32_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#af8c9f6ef56de148e3b755f64eb7fdb74" title="Alignment of the buffer.">start_addr_alignment</a>;
<a name="l00074"></a>00074 
<a name="l00076"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#ab6b58f426993985a55f040a6b34a5428">00076</a>         <span class="keywordtype">bool</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#ab6b58f426993985a55f040a6b34a5428" title="Buffer is not occupied.">is_free</a>;
<a name="l00078"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#a4d7e4589c1c3ded94c784ab7420c4be2">00078</a>         <span class="keywordtype">bool</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a4d7e4589c1c3ded94c784ab7420c4be2" title="Buffer is allocated in static mode.">is_static</a>;
<a name="l00079"></a>00079 
<a name="l00081"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#af7015027789123d03e1f6dcfd37db572">00081</a>         std::string <a class="code" href="classyamm__ns_1_1yamm__buffer.html#af7015027789123d03e1f6dcfd37db572" title="Name given by user.">name</a>;
<a name="l00082"></a>00082 
<a name="l00087"></a>00087         uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a8b73a7b4e1a4bf18a41d7ad68eee32ae" title="Generates a random unsigned int64.">generate_rand64</a>();
<a name="l00088"></a>00088 
<a name="l00098"></a>00098         uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#ac7973c58a7589d9f975d76447a13b18e" title="Used to compute start_addr with alignment, only works for positive increment Used...">get_aligned_addr</a>(<span class="keyword">const</span> uint_32_t &amp;alignment,
<a name="l00099"></a>00099                         <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* free_buffer);
<a name="l00100"></a>00100 
<a name="l00110"></a>00110         uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#adc7b1558f3527810e808b53962ebd24d" title="Computes the size taking in account alignment using get_aligned_addr() Used by find_suitable_buffer(...">compute_size_with_align</a>(<span class="keyword">const</span> uint_32_t &amp;alignment,
<a name="l00111"></a>00111                         <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* temp);
<a name="l00112"></a>00112 
<a name="l00122"></a>00122         uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a8466ba349d37f338367e0574712732ec" title="Computes and returns the size of the buffer on which it is called Used by allocate()...">compute_size_with_gran</a>(uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a37d7c266567a1f0fc54dcdee095bd747" title="Size of the buffer.">size</a>, uint_32_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a5fef85230ba3cc2d574a3529cd6f8f0b" title="Granularity of the buffer.">granularity</a>);
<a name="l00123"></a>00123 
<a name="l00133"></a>00133         <span class="keywordtype">bool</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a4aee556e2ebd89be5ab3200951fc09c6" title="It computes and updates start_addr for various allocation modes, uses get_aligned_addr()...">compute_start_addr</a>(<a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* temp, <span class="keywordtype">int</span> alloc_mode);
<a name="l00134"></a>00134 
<a name="l00142"></a>00142         <span class="keywordtype">void</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#afcff83c1d997905b6afc3da20edce39b" title="It automatically updates the start_addr taking in account the alignment It can modify...">get_closest_aligned_addr</a>(<a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* temp);
<a name="l00143"></a>00143 
<a name="l00150"></a>00150         <span class="keywordtype">void</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a887a1afa1c52e4d93478e22a5b06af93" title="It adds buffer n inside free buffer temp, it calls link_in_list to update the pointers...">add</a>(<a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* buffer_to_fit, <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* place);
<a name="l00151"></a>00151 
<a name="l00159"></a>00159         <span class="keywordtype">void</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a172360e2e933153822ebc7f922de8d9e" title="It links buffers in memory after adding a new buffer.">link_in_list</a>(<a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* temp_prev, <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* n,
<a name="l00160"></a>00160                         <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* temp);
<a name="l00161"></a>00161 
<a name="l00167"></a>00167         <span class="keywordtype">void</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#ac2eea28f0450dfded62892c523fde79f" title="It merges free buffers after deallocation.">merge</a>(<a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* free_n);
<a name="l00168"></a>00168 
<a name="l00179"></a>00179         <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* <a class="code" href="classyamm__ns_1_1yamm__buffer.html#ab26a82be9e308a3eb5d527268ff87a9d" title="Used for finding a suitable buffer in which the new buffer can be allocated Used...">find_suitable_buffer</a>(uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a37d7c266567a1f0fc54dcdee095bd747" title="Size of the buffer.">size</a>, uint_32_t alignment,
<a name="l00180"></a>00180                         <span class="keywordtype">int</span> alloc_mode);
<a name="l00181"></a>00181 
<a name="l00189"></a>00189         <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a4061026b866fbebebe6ac63e3de45a40" title="Same as get_buffer() but it can also return free buffer, used internally.">internal_get_buffer</a>(uint_64_t address);
<a name="l00190"></a>00190 
<a name="l00191"></a>00191         <span class="comment">// Debug functions</span>
<a name="l00192"></a>00192 
<a name="l00197"></a>00197         <span class="keywordtype">void</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a4a18464b08326903ab9d2db8e4acbb15" title="Function that traverses the entire memory printing each buffer&amp;#39;s number, size...">print</a>(FILE* fp);
<a name="l00198"></a>00198 
<a name="l00203"></a>00203         <span class="keywordtype">void</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a9219931e56b24718c811fcece118d473" title="Function that traverses the FREE memory printing each buffer&amp;#39;s number, size,...">print_free</a>(FILE* fp);
<a name="l00204"></a>00204 
<a name="l00210"></a>00210         std::string <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a7bb58b8c99e9d7d0f816d12a8b8f4208" title="Function that prints the size argument according to it&amp;#39;s size (Gb,Mb,Kb,bytes)...">print_size</a>();
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 <span class="keyword">public</span>:
<a name="l00213"></a>00213 
<a name="l00215"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#a493effd297f3eab87e8e55b81244b106">00215</a>         <span class="keywordtype">bool</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a493effd297f3eab87e8e55b81244b106" title="0 by default.">disable_warnings</a>;
<a name="l00217"></a><a class="code" href="classyamm__ns_1_1yamm__buffer.html#a7344f36260f0aa26dd174f8fab844735">00217</a>         <span class="keywordtype">bool</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a7344f36260f0aa26dd174f8fab844735" title="0 by default.">disable_info</a>;
<a name="l00218"></a>00218 
<a name="l00219"></a>00219         <span class="comment">// Constructors</span>
<a name="l00220"></a>00220 
<a name="l00222"></a>00222         <a class="code" href="classyamm__ns_1_1yamm__buffer.html#ab0680e3bb97ba702d2a77cb014fe772b" title="All fields are set to the default value.">yamm_buffer</a>();
<a name="l00224"></a>00224         <a class="code" href="classyamm__ns_1_1yamm__buffer.html#ab0680e3bb97ba702d2a77cb014fe772b" title="All fields are set to the default value.">yamm_buffer</a>(uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a37d7c266567a1f0fc54dcdee095bd747" title="Size of the buffer.">size</a>);
<a name="l00226"></a>00226         <a class="code" href="classyamm__ns_1_1yamm__buffer.html#ab0680e3bb97ba702d2a77cb014fe772b" title="All fields are set to the default value.">yamm_buffer</a>(uint_64_t start, uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a37d7c266567a1f0fc54dcdee095bd747" title="Size of the buffer.">size</a>);
<a name="l00228"></a>00228         <a class="code" href="classyamm__ns_1_1yamm__buffer.html#ab0680e3bb97ba702d2a77cb014fe772b" title="All fields are set to the default value.">yamm_buffer</a>(std::string <a class="code" href="classyamm__ns_1_1yamm__buffer.html#af7015027789123d03e1f6dcfd37db572" title="Name given by user.">name</a>);
<a name="l00230"></a>00230         <a class="code" href="classyamm__ns_1_1yamm__buffer.html#ab0680e3bb97ba702d2a77cb014fe772b" title="All fields are set to the default value.">yamm_buffer</a>(uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a37d7c266567a1f0fc54dcdee095bd747" title="Size of the buffer.">size</a>, std::string <a class="code" href="classyamm__ns_1_1yamm__buffer.html#af7015027789123d03e1f6dcfd37db572" title="Name given by user.">name</a>);
<a name="l00231"></a>00231 
<a name="l00233"></a>00233         <a class="code" href="classyamm__ns_1_1yamm__buffer.html#ab0680e3bb97ba702d2a77cb014fe772b" title="All fields are set to the default value.">yamm_buffer</a>(<a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* new_buffer);
<a name="l00234"></a>00234 
<a name="l00238"></a>00238         <span class="keywordtype">void</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a28e2d5b2ed7ad7c027f12b474ac4f56b" title="Removes all buffers that are not static.">soft_reset</a>();
<a name="l00239"></a>00239 
<a name="l00243"></a>00243         <span class="keywordtype">void</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#acd44b9fb8762002a94154545724ebc4a" title="Function that deallocates all (including static) buffers.">hard_reset</a>();
<a name="l00244"></a>00244 
<a name="l00257"></a>00257         <span class="keywordtype">bool</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#afe87dcdc030cc38cd40b1d0262e1b160" title="This function tries to allocate the buffer in the memory, according to the allocation_mode...">allocate</a>(<a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* new_buffer, <span class="keywordtype">int</span> allocation_mode);
<a name="l00258"></a>00258 
<a name="l00270"></a>00270         <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a1c3a0241fff5bc7a0c59ae151b68481b" title="This function tries to allocate a buffer with the specified size in the memory, according...">allocate_by_size</a>(uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a37d7c266567a1f0fc54dcdee095bd747" title="Size of the buffer.">size</a>, <span class="keywordtype">int</span> allocation_mode);
<a name="l00271"></a>00271 
<a name="l00281"></a>00281         <span class="keywordtype">bool</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#aa1de4d4f822ef87c3beedbdd8bf54ffc" title="This function tries to insert a buffer in the memory with the specified start_addr...">insert</a>(<a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* new_buffer);
<a name="l00282"></a>00282 
<a name="l00292"></a>00292         <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a97bc7f1f7bcae0b8795b8b534b6fa534" title="Similar to insert(), this function will try to insert a buffer at a specified address...">insert_access</a>(<a class="code" href="classyamm__ns_1_1yamm__access.html" title="Class that models a basic access which requires a start address and a size End address...">yamm_access</a>* access);
<a name="l00293"></a>00293 
<a name="l00294"></a>00294         <span class="comment">// Functions to do with contents</span>
<a name="l00295"></a>00295 
<a name="l00305"></a>00305         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a408d948abd10ea7eece7e019a3cb37c7" title="Store custom data in the buffer.">set_contents</a>(<span class="keywordtype">char</span>* payload, uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a37d7c266567a1f0fc54dcdee095bd747" title="Size of the buffer.">size</a>);
<a name="l00306"></a>00306 
<a name="l00314"></a>00314         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#ad60eaca78cbc183fd6224c679e42bb42" title="A hook function which the user can extend to implement a custom generation rule for...">generate_random_contents</a>();
<a name="l00315"></a>00315 
<a name="l00319"></a>00319         <span class="keywordtype">void</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a2184402abbcd2f03a145ad1bafc0c997" title="Function that wipes the data stored in the buffer.">reset_contents</a>();
<a name="l00320"></a>00320 
<a name="l00328"></a>00328         <span class="keyword">virtual</span> <span class="keywordtype">char</span>* <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a2ca1d7b95b4521e171c6d7c54d8b7fd9" title="This function returns the data stored in the buffer.">get_contents</a>();
<a name="l00329"></a>00329 
<a name="l00338"></a>00338         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#adfb8573d807a47ff8f459d6e034cb1a7" title="Function that compares the content from current buffer to the reference.">compare_contents</a>(<span class="keywordtype">char</span>* reference, uint_64_t ref_size);
<a name="l00339"></a>00339 
<a name="l00340"></a>00340         <span class="comment">// Functions used to free buffers</span>
<a name="l00341"></a>00341 
<a name="l00352"></a>00352         <span class="keywordtype">bool</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#aeb027000260fd69c561831a7644b63e9" title="This function tries to deallocate a buffer allocated in the memory.">deallocate</a>(<a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* buffer);
<a name="l00353"></a>00353 
<a name="l00364"></a>00364         <span class="keywordtype">bool</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#afb5e65350265f28acaaccb3d482c9f22" title="This function tries to deallocate from the memory the buffer which contains the specified...">deallocate_by_addr</a>(uint_64_t address);
<a name="l00365"></a>00365 
<a name="l00366"></a>00366         <span class="comment">// Functions used to find buffers</span>
<a name="l00367"></a>00367 
<a name="l00375"></a>00375         <a class="code" href="classyamm__ns_1_1yamm__buffer.html" title="Class that defines a buffer.">yamm_buffer</a>* <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a7f67da27d34fe3d3a5180bc13906f1ea" title="It searches for the buffer located at the specified address.">get_buffer</a>(uint_64_t address);
<a name="l00376"></a>00376 
<a name="l00385"></a>00385         std::vector&lt;yamm_buffer&gt; <a class="code" href="classyamm__ns_1_1yamm__buffer.html#aa288f5f9df00195b10a72f472cdd2256" title="It searches for all buffers that span in the address space defined by start_addr...">get_buffers_in_range</a>(uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#aede545ee609ae750355a72162531bba3" title="Start address of the buffer.">start_addr</a>,
<a name="l00386"></a>00386                         uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#aad6087f89430ad272f6e22d412819498" title="End address of the buffer.">end_addr</a>);
<a name="l00387"></a>00387 
<a name="l00396"></a>00396         std::vector&lt;yamm_buffer&gt; <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a0080104c25801a0db42f68d79c372cf4" title="It searches for all buffers that span in the address range specified by access.">get_buffers_by_access</a>(<a class="code" href="classyamm__ns_1_1yamm__access.html" title="Class that models a basic access which requires a start address and a size End address...">yamm_access</a>* access);
<a name="l00397"></a>00397 
<a name="l00405"></a>00405         std::vector&lt;yamm_buffer&gt; <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a430d9ddb2ef769355e97f2ed00451e4a" title="Searches by the name given to the buffers.">get_buffers_by_name</a>(std::string name_to_find);
<a name="l00406"></a>00406 
<a name="l00407"></a>00407         <span class="comment">// Other functions</span>
<a name="l00408"></a>00408         <span class="keywordtype">bool</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a0aa860cae263b1dad073d9ab7097717b" title="Function that checks if any buffers are occupied in the given access range.">access_overlaps</a>(<a class="code" href="classyamm__ns_1_1yamm__access.html" title="Class that models a basic access which requires a start address and a size End address...">yamm_access</a>* access);
<a name="l00409"></a>00409 
<a name="l00418"></a>00418         std::string <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a437ec44eb353c922a66653c0a38a58a0" title="Returns the memory structure as a string.">sprint</a>(<span class="keywordtype">bool</span> recursive, <span class="keywordtype">int</span> indentation);
<a name="l00419"></a>00419 
<a name="l00425"></a>00425         <span class="keywordtype">void</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a226193b6f0bce549aa58c96b5a50441c" title="Writes the memory structure to file.">write_to_file</a>(std::string filename);
<a name="l00429"></a>00429         <span class="keywordtype">double</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a6ef8bf35a704b371134bd7d57e5e334c" title="Returns the percentage of fragmentation.">get_fragmentation</a>();
<a name="l00430"></a>00430 
<a name="l00434"></a>00434         <span class="keywordtype">double</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a8718776c898711f5f3cc26f47900a33e" title="Returns the percentage of free memory compared to the whole memory.">get_usage_statistics</a>();
<a name="l00435"></a>00435 
<a name="l00444"></a>00444         <span class="keywordtype">bool</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a6b8be56890fe6473b979ad31caf490ca" title="This function is used to do a self-check on the memory model to see if all the buffers...">check_address_space_consistency</a>();
<a name="l00445"></a>00445 
<a name="l00446"></a>00446         std::string get_name() {
<a name="l00447"></a>00447                 <span class="keywordflow">return</span> this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#af7015027789123d03e1f6dcfd37db572" title="Name given by user.">name</a>;
<a name="l00448"></a>00448         }
<a name="l00449"></a>00449         ;
<a name="l00450"></a>00450 
<a name="l00451"></a>00451         uint_64_t get_start_addr() {
<a name="l00452"></a>00452                 <span class="keywordflow">return</span> this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#aede545ee609ae750355a72162531bba3" title="Start address of the buffer.">start_addr</a>;
<a name="l00453"></a>00453         }
<a name="l00454"></a>00454 
<a name="l00455"></a>00455         uint_64_t get_end_addr() {
<a name="l00456"></a>00456                 <span class="keywordflow">return</span> this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#aad6087f89430ad272f6e22d412819498" title="End address of the buffer.">end_addr</a>;
<a name="l00457"></a>00457         }
<a name="l00458"></a>00458 
<a name="l00459"></a>00459         uint_64_t get_size() {
<a name="l00460"></a>00460                 <span class="keywordflow">return</span> this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a37d7c266567a1f0fc54dcdee095bd747" title="Size of the buffer.">size</a>;
<a name="l00461"></a>00461         }
<a name="l00462"></a>00462 
<a name="l00463"></a>00463         <span class="keywordtype">bool</span> get_is_free() {
<a name="l00464"></a>00464                 <span class="keywordflow">return</span> this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#ab6b58f426993985a55f040a6b34a5428" title="Buffer is not occupied.">is_free</a>;
<a name="l00465"></a>00465         }
<a name="l00466"></a>00466 
<a name="l00467"></a>00467         <span class="keywordtype">bool</span> get_is_static() {
<a name="l00468"></a>00468                 <span class="keywordflow">return</span> this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a4d7e4589c1c3ded94c784ab7420c4be2" title="Buffer is allocated in static mode.">is_static</a>;
<a name="l00469"></a>00469         }
<a name="l00470"></a>00470 
<a name="l00471"></a>00471         uint_32_t get_start_addr_alignment() {
<a name="l00472"></a>00472                 <span class="keywordflow">return</span> this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#af8c9f6ef56de148e3b755f64eb7fdb74" title="Alignment of the buffer.">start_addr_alignment</a>;
<a name="l00473"></a>00473         }
<a name="l00474"></a>00474 
<a name="l00475"></a>00475         uint_32_t get_granularity() {
<a name="l00476"></a>00476                 <span class="keywordflow">return</span> this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a5fef85230ba3cc2d574a3529cd6f8f0b" title="Granularity of the buffer.">granularity</a>;
<a name="l00477"></a>00477         }
<a name="l00478"></a>00478 
<a name="l00479"></a>00479         <span class="keywordtype">void</span> set_name(std::string new_name) {
<a name="l00480"></a>00480                 this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#af7015027789123d03e1f6dcfd37db572" title="Name given by user.">name</a> = new_name;
<a name="l00481"></a>00481         }
<a name="l00482"></a>00482 
<a name="l00483"></a>00483         <span class="keywordtype">void</span> set_start_addr(uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#aede545ee609ae750355a72162531bba3" title="Start address of the buffer.">start_addr</a>) {
<a name="l00484"></a>00484 
<a name="l00485"></a>00485                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a6768b4e2d199bec0e59cfc020a2167fd" title="next buffer on current recursion level (free or occupied)">next</a> || this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a7977210ee30097d3df4f5a0927d0f645" title="previous free buffer on current recursion level (free or occupied)">prev</a>) {
<a name="l00486"></a>00486                         <span class="keywordflow">if</span> (!<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a493effd297f3eab87e8e55b81244b106" title="0 by default.">disable_warnings</a>)
<a name="l00487"></a>00487                                 fprintf(stderr,
<a name="l00488"></a>00488                                                 <span class="stringliteral">&quot;[YAMM_WRN] Can&apos;t modify a linked buffer!\n\t in %s at line %d\n&quot;</span>,
<a name="l00489"></a>00489                                                 __FILE__, __LINE__);
<a name="l00490"></a>00490                         <span class="keywordflow">return</span>;
<a name="l00491"></a>00491                 }
<a name="l00492"></a>00492 
<a name="l00493"></a>00493                 this-&gt;start_addr = start_addr;
<a name="l00494"></a>00494                 this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#aad6087f89430ad272f6e22d412819498" title="End address of the buffer.">end_addr</a> = this-&gt;start_addr + this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a37d7c266567a1f0fc54dcdee095bd747" title="Size of the buffer.">size</a> - 1;
<a name="l00495"></a>00495         }
<a name="l00496"></a>00496 
<a name="l00497"></a>00497         <span class="keywordtype">void</span> set_size(uint_64_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a37d7c266567a1f0fc54dcdee095bd747" title="Size of the buffer.">size</a>) {
<a name="l00498"></a>00498 
<a name="l00499"></a>00499                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a6768b4e2d199bec0e59cfc020a2167fd" title="next buffer on current recursion level (free or occupied)">next</a> || this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a7977210ee30097d3df4f5a0927d0f645" title="previous free buffer on current recursion level (free or occupied)">prev</a>) {
<a name="l00500"></a>00500                         <span class="keywordflow">if</span> (!<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a493effd297f3eab87e8e55b81244b106" title="0 by default.">disable_warnings</a>)
<a name="l00501"></a>00501                                 fprintf(stderr,
<a name="l00502"></a>00502                                                 <span class="stringliteral">&quot;[YAMM_WRN] Can&apos;t modify a linked buffer!\n\t in %s at line %d\n&quot;</span>,
<a name="l00503"></a>00503                                                 __FILE__, __LINE__);
<a name="l00504"></a>00504                         <span class="keywordflow">return</span>;
<a name="l00505"></a>00505                 }
<a name="l00506"></a>00506 
<a name="l00507"></a>00507                 this-&gt;size = size;
<a name="l00508"></a>00508                 this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#aad6087f89430ad272f6e22d412819498" title="End address of the buffer.">end_addr</a> = this-&gt;start_addr + this-&gt;size - 1;
<a name="l00509"></a>00509         }
<a name="l00510"></a>00510 
<a name="l00511"></a>00511         <span class="keywordtype">void</span> set_start_addr_alignment(uint_32_t alignment) {
<a name="l00512"></a>00512 
<a name="l00513"></a>00513                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a6768b4e2d199bec0e59cfc020a2167fd" title="next buffer on current recursion level (free or occupied)">next</a> || this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a7977210ee30097d3df4f5a0927d0f645" title="previous free buffer on current recursion level (free or occupied)">prev</a>) {
<a name="l00514"></a>00514                         <span class="keywordflow">if</span> (!<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a493effd297f3eab87e8e55b81244b106" title="0 by default.">disable_warnings</a>)
<a name="l00515"></a>00515                                 fprintf(stderr,
<a name="l00516"></a>00516                                                 <span class="stringliteral">&quot;[YAMM_WRN] Can&apos;t modify a linked buffer!\n\t in %s at line %d\n&quot;</span>,
<a name="l00517"></a>00517                                                 __FILE__, __LINE__);
<a name="l00518"></a>00518                         <span class="keywordflow">return</span>;
<a name="l00519"></a>00519                 }
<a name="l00520"></a>00520 
<a name="l00521"></a>00521                 this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#af8c9f6ef56de148e3b755f64eb7fdb74" title="Alignment of the buffer.">start_addr_alignment</a> = alignment;
<a name="l00522"></a>00522         }
<a name="l00523"></a>00523 
<a name="l00524"></a>00524         <span class="keywordtype">void</span> set_granularity(uint_32_t <a class="code" href="classyamm__ns_1_1yamm__buffer.html#a5fef85230ba3cc2d574a3529cd6f8f0b" title="Granularity of the buffer.">granularity</a>) {
<a name="l00525"></a>00525 
<a name="l00526"></a>00526                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a6768b4e2d199bec0e59cfc020a2167fd" title="next buffer on current recursion level (free or occupied)">next</a> || this-&gt;<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a7977210ee30097d3df4f5a0927d0f645" title="previous free buffer on current recursion level (free or occupied)">prev</a>) {
<a name="l00527"></a>00527                         <span class="keywordflow">if</span> (!<a class="code" href="classyamm__ns_1_1yamm__buffer.html#a493effd297f3eab87e8e55b81244b106" title="0 by default.">disable_warnings</a>)
<a name="l00528"></a>00528                                 fprintf(stderr,
<a name="l00529"></a>00529                                                 <span class="stringliteral">&quot;[YAMM_WRN] Can&apos;t modify a linked buffer!\n\t in %s at line %d\n&quot;</span>,
<a name="l00530"></a>00530                                                 __FILE__, __LINE__);
<a name="l00531"></a>00531                         <span class="keywordflow">return</span>;
<a name="l00532"></a>00532                 }
<a name="l00533"></a>00533 
<a name="l00534"></a>00534                 this-&gt;granularity = granularity;
<a name="l00535"></a>00535         }
<a name="l00536"></a>00536 
<a name="l00541"></a>00541         <span class="keyword">virtual</span> <a class="code" href="classyamm__ns_1_1yamm__buffer.html#afd844a515f20da560ca514ad89b94b2d" title="Destructor Frees everything.">~yamm_buffer</a>();
<a name="l00542"></a>00542 
<a name="l00543"></a>00543 };
<a name="l00544"></a>00544 
<a name="l00545"></a>00545 }
<a name="l00546"></a>00546 <span class="preprocessor">#endif // __yamm_buffer_h</span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 5 Sep 2016 for YAMM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
